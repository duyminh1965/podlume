(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[646],{5262:(e,t,a)=>{Promise.resolve().then(a.bind(a,4707))},4707:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>q});var s=a(5155),r=a(2679),l=a(9606),i=a(3415),n=a(4085),o=a(2115),d=a(2317),c=a(9602),m=a(6195);let u=(0,a(1027).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),p=o.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(m.b,{ref:t,className:(0,c.cn)(u(),a),...r})});p.displayName=m.b.displayName;let x=l.Op,f=o.createContext({}),g=e=>{let{...t}=e;return(0,s.jsx)(f.Provider,{value:{name:t.name},children:(0,s.jsx)(l.xI,{...t})})},h=()=>{let e=o.useContext(f),t=o.useContext(b),{getFieldState:a,formState:s}=(0,l.xW)(),r=a(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...r}},b=o.createContext({}),v=o.forwardRef((e,t)=>{let{className:a,...r}=e,l=o.useId();return(0,s.jsx)(b.Provider,{value:{id:l},children:(0,s.jsx)("div",{ref:t,className:(0,c.cn)("space-y-2",a),...r})})});v.displayName="FormItem";let j=o.forwardRef((e,t)=>{let{className:a,...r}=e,{error:l,formItemId:i}=h();return(0,s.jsx)(p,{ref:t,className:(0,c.cn)(l&&"text-destructive",a),htmlFor:i,...r})});j.displayName="FormLabel";let w=o.forwardRef((e,t)=>{let{...a}=e,{error:r,formItemId:l,formDescriptionId:i,formMessageId:n}=h();return(0,s.jsx)(d.DX,{ref:t,id:l,"aria-describedby":r?"".concat(i," ").concat(n):"".concat(i),"aria-invalid":!!r,...a})});w.displayName="FormControl",o.forwardRef((e,t)=>{let{className:a,...r}=e,{formDescriptionId:l}=h();return(0,s.jsx)("p",{ref:t,id:l,className:(0,c.cn)("text-[0.8rem] text-muted-foreground",a),...r})}).displayName="FormDescription";let y=o.forwardRef((e,t)=>{let{className:a,children:r,...l}=e,{error:i,formMessageId:n}=h(),o=i?String(null==i?void 0:i.message):r;return o?(0,s.jsx)("p",{ref:t,id:n,className:(0,c.cn)("text-[0.8rem] font-medium text-destructive",a),...l,children:o}):null});y.displayName="FormMessage";var N=a(9846),S=a(2645),A=a(2488),P=a(7193);let T=N.bL;N.YJ;let I=N.WT,F=o.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(N.l9,{ref:t,className:(0,c.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[r,(0,s.jsx)(N.In,{asChild:!0,children:(0,s.jsx)(S.A,{className:"h-4 w-4 opacity-50"})})]})});F.displayName=N.l9.displayName;let _=o.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(N.PP,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(A.A,{className:"h-4 w-4"})})});_.displayName=N.PP.displayName;let D=o.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(N.wn,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(S.A,{className:"h-4 w-4"})})});D.displayName=N.wn.displayName;let E=o.forwardRef((e,t)=>{let{className:a,children:r,position:l="popper",...i}=e;return(0,s.jsx)(N.ZL,{children:(0,s.jsxs)(N.UC,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...i,children:[(0,s.jsx)(_,{}),(0,s.jsx)(N.LM,{className:(0,c.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(D,{})]})})});E.displayName=N.UC.displayName,o.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(N.JU,{ref:t,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",a),...r})}).displayName=N.JU.displayName;let C=o.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(N.q7,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(N.VF,{children:(0,s.jsx)(P.A,{className:"h-4 w-4"})})}),(0,s.jsx)(N.p4,{children:r})]})});C.displayName=N.q7.displayName,o.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(N.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=N.wv.displayName;var k=a(2336);let R=o.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,c.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});R.displayName="Textarea";var O=a(1240),U=a(7177),z=a(1180),M=a(3697),V=a(241),G=a(7087);let $=e=>{let{setAudio:t,voiceType:a,voicePrompt:s,setAudioStorageId:r}=e,[l,i]=(0,o.useState)(!1),{toast:n}=(0,V.dj)(),d=(0,U.n_)(z.F.files.generateUploadUrl),{startUpload:c}=(0,G.YD)(d),m=(0,U.y3)(z.F.openai.generateAudioAction),u=(0,U.n_)(z.F.podlume.getUrl);return{isGenerating:l,generatePodlume:async()=>{if(i(!0),t(""),!s)return n({title:"Please provide a voiceType to generate a podlume"}),i(!1);try{let e=await m({voice:a,input:s}),l=new Blob([e],{type:"audio/mpeg"}),o="podlume-".concat((0,M.A)(),".mp3"),d=new File([l],o,{type:"audio/mpeg"}),p=(await c([d]))[0].response.storageId;r(p);let x=await u({storageId:p});t(x),i(!1),n({title:"Podlume generated successfully"})}catch(e){console.log("Error generating podlume",e),n({title:"Error creating a podlume",variant:"destructive"}),i(!1)}}}},B=e=>{let{isGenerating:t,generatePodlume:a}=$(e);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,s.jsx)(p,{className:"text-16 font-bold text-white-1",children:"Ai Prompt to generate Podlume"}),(0,s.jsx)(R,{className:"input-class font-light focus-visible:ring-orange-1 text-white-1",placeholder:"Provide text to generate audio",rows:5,value:e.voicePrompt,onChange:t=>e.setVoicePrompt(t.target.value)})]}),(0,s.jsx)("div",{className:"mt-5 w-full max-w-[200px]",children:(0,s.jsx)(n.$,{type:"submit",className:"text-16 bg-orange-1 py-4 font-bold text-white-1",onClick:a,children:t?(0,s.jsxs)(s.Fragment,{children:["Generating",(0,s.jsx)(O.A,{size:20,className:"animate-spin ml-2"})]}):"Generate"})}),e.audio&&(0,s.jsx)("audio",{controls:!0,src:e.audio,autoPlay:!0,className:"mt-5",onLoadedMetadata:t=>e.setAudioDuration(t.currentTarget.duration)})]})};var L=a(5565);let J=e=>{let{setImage:t,setImageStorageId:a,image:r,imagePrompt:l,setImagePrompt:i}=e,[d,m]=(0,o.useState)(!1),[u,x]=(0,o.useState)(!1),f=(0,o.useRef)(null),{toast:g}=(0,V.dj)(),h=(0,U.n_)(z.F.files.generateUploadUrl),{startUpload:b}=(0,G.YD)(h),v=(0,U.n_)(z.F.podlume.getUrl),j=(0,U.y3)(z.F.openai.generateThumbnailAction),w=async(e,s)=>{x(!0),t("");try{let r=new File([e],s,{type:"image/png"}),l=(await b([r]))[0].response.storageId;a(l);let i=await v({storageId:l});t(i),x(!1),g({title:"Thumbnail generated successfully"})}catch(e){console.log(e),g({title:"Error generating thumbnail",variant:"destructive"})}},y=async()=>{try{let e=await j({prompt:l}),t=new Blob([e],{type:"image/png"});w(t,"thumbnail-".concat((0,M.A)(),".png"))}catch(e){console.log(e),g({title:"Error generating thumbnail",variant:"destructive"})}},N=async e=>{e.preventDefault();try{let t=e.target.files;if(!t)return;let a=t[0],s=await a.arrayBuffer().then(e=>new Blob([e]));w(s,a.name)}catch(e){console.log(e),g({title:"Error uploading image",variant:"destructive"})}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"generate_thumbnail",children:[(0,s.jsx)(n.$,{type:"button",variant:"plain",onClick:()=>m(!0),className:(0,c.cn)("",{"bg-black-6":d}),children:"Use AI to generate thumbnail"}),(0,s.jsx)(n.$,{type:"button",variant:"plain",onClick:()=>m(!1),className:(0,c.cn)("",{"bg-black-6":!d}),children:"Upload custom image"})]}),d?(0,s.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,s.jsxs)("div",{className:"mt-5 flex flex-col gap-2.5",children:[(0,s.jsx)(p,{className:"text-16 font-bold text-white-1",children:"Ai Prompt to generate Thumbnail"}),(0,s.jsx)(R,{className:"input-class font-light focus-visible:ring-orange-1 text-white-1",placeholder:"Provide text to generate thumbnail",rows:5,value:l,onChange:e=>i(e.target.value)})]}),(0,s.jsx)("div",{className:"w-full max-w-[200px]",children:(0,s.jsx)(n.$,{type:"submit",className:"text-16 bg-orange-1 py-4 font-bold text-white-1",onClick:y,children:u?(0,s.jsxs)(s.Fragment,{children:["Generating",(0,s.jsx)(O.A,{size:20,className:"animate-spin ml-2"})]}):"Generate"})})]}):(0,s.jsxs)("div",{className:"image_div",onClick:()=>{var e;return null==f?void 0:null===(e=f.current)||void 0===e?void 0:e.click()},children:[(0,s.jsx)(k.p,{type:"file",className:"hidden",ref:f,onChange:e=>N(e)}),u?(0,s.jsxs)("div",{className:"text-16 flex-center font-medium text-white-1",children:["Uploading",(0,s.jsx)(O.A,{size:20,className:"animate-sprin"})]}):(0,s.jsx)(L.default,{src:"/icons/upload-image.svg",width:40,height:40,alt:"upload"}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,s.jsx)("h2",{className:"text-12 font-bold text-orange-1",children:"Click to upload"}),(0,s.jsx)("p",{className:"text-12 font-normal text-gray-1",children:"SVG, PNG, JPG, or GIF (max. 1080x1080px)"})]})]}),r&&(0,s.jsx)("div",{className:"flex-center w-full",children:(0,s.jsx)(L.default,{src:r,width:200,height:200,className:"mt-5",alt:"thumbnail"})})]})};var W=a(6046);let X=["alloy","shimmer","nova","echo","fable","onyx"],Y=i.z.object({podlumeTitle:i.z.string().min(2),podlumeDescription:i.z.string().min(2)}),q=()=>{let e=(0,W.useRouter)(),[t,a]=(0,o.useState)(""),[i,d]=(0,o.useState)(null),[m,u]=(0,o.useState)(""),[f,h]=(0,o.useState)(""),[b,N]=(0,o.useState)(null),[S,A]=(0,o.useState)(0),[P,_]=(0,o.useState)(null),[D,M]=(0,o.useState)(""),[G,$]=(0,o.useState)(!1),L=(0,U.n_)(z.F.podlume.createPodlume),{toast:q}=(0,V.dj)(),Q=(0,l.mN)({resolver:(0,r.u)(Y),defaultValues:{podlumeTitle:"",podlumeDescription:""}});async function Z(a){try{if($(!0),!f||!m||!P)throw q({title:"Please generate audio and image"}),$(!1),Error("Please generate audio and image");await L({podlumeTitle:a.podlumeTitle,podlumeDescription:a.podlumeDescription,audioUrl:f,imageUrl:m,voiceType:P,imagePrompt:t,voicePrompt:D,views:0,audioDuration:S,audioStorageId:b,imageStorageId:i}),q({title:"Podlume created"}),$(!1),e.push("/")}catch(e){console.log(e),q({title:"Error",variant:"destructive"}),$(!1)}}return(0,s.jsxs)("section",{className:"mt-10 flex flex-col",children:[(0,s.jsx)("h1",{className:"text-20 font-bold text-white-1",children:"Create Podlume"}),(0,s.jsx)(x,{...Q,children:(0,s.jsxs)("form",{onSubmit:Q.handleSubmit(Z),className:"mt-12 flex w-full flex-col",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-[30px] border-b border-black-5 pb-10",children:[(0,s.jsx)(g,{control:Q.control,name:"podlumeTitle",render:e=>{let{field:t}=e;return(0,s.jsxs)(v,{className:"flex flex-col gap-2.5",children:[(0,s.jsx)(j,{className:"text-16 font-bold text-white-1",children:"Title"}),(0,s.jsx)(w,{children:(0,s.jsx)(k.p,{placeholder:"dmbuysvi Podlume",...t,className:"input-class focus:ring-orange-1 text-white-1"})}),(0,s.jsx)(y,{className:"text-white-1"})]})}}),(0,s.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,s.jsx)(p,{className:"text-16 font-bold text-white-1",children:"Select AI Voice"}),(0,s.jsxs)(T,{onValueChange:e=>_(e),children:[(0,s.jsx)(F,{className:(0,c.cn)("text-16 w-full border-none bg-black-1 text-gray-1 focus:ring-orange-1"),children:(0,s.jsx)(I,{placeholder:"Select AI Voice",className:"placeholder:text-gray-1"})}),(0,s.jsx)(E,{className:"text-16 border-none bg-black-1 font-bold text-white-1 focus:ring-orange-1",children:X.map(e=>(0,s.jsx)(C,{value:e,className:"capitalize focus:bg-orange-1",children:e},e))}),P&&(0,s.jsx)("audio",{src:"/".concat(P,".mp3"),autoPlay:!0,className:"hidden"})]})]}),(0,s.jsx)(g,{control:Q.control,name:"podlumeDescription",render:e=>{let{field:t}=e;return(0,s.jsxs)(v,{className:"flex flex-col gap-2.5",children:[(0,s.jsx)(j,{className:"text-16 font-bold text-white-1",children:"Description"}),(0,s.jsx)(w,{children:(0,s.jsx)(R,{placeholder:"Write a short podlume description",...t,className:"input-class focus-visible:ring-orange-1"})}),(0,s.jsx)(y,{className:"text-white-1"})]})}})]}),(0,s.jsxs)("div",{className:"flex flex-col pt-10",children:[(0,s.jsx)(B,{setAudioStorageId:N,setAudio:h,voiceType:P,audio:f,voicePrompt:D,setVoicePrompt:M,setAudioDuration:A}),(0,s.jsx)(J,{setImage:u,setImageStorageId:d,image:m,imagePrompt:t,setImagePrompt:a}),(0,s.jsx)("div",{className:"mt-10 w-full",children:(0,s.jsx)(n.$,{type:"submit",className:"text-16 w-full bg-orange-1 py-4 font-extrabold text-white-1 transition-all duration-500 hover:bg-black-1",children:G?(0,s.jsxs)(s.Fragment,{children:["Submitting",(0,s.jsx)(O.A,{size:20,className:"animate-spin ml-2"})]}):"Submit & Publish Podlume"})})]})]})})]})}},4085:(e,t,a)=>{"use strict";a.d(t,{$:()=>d});var s=a(5155),r=a(2115),l=a(2317),i=a(1027),n=a(9602);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",plain:"border-none bg-transparent text-[16px] font-bold leading-normal text-white-1"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,asChild:d=!1,...c}=e,m=d?l.DX:"button";return(0,s.jsx)(m,{className:(0,n.cn)(o({variant:r,size:i,className:a})),ref:t,...c})});d.displayName="Button"},2336:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var s=a(5155),r=a(2115),l=a(9602);let i=r.forwardRef((e,t)=>{let{className:a,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...i})});i.displayName="Input"},1180:(e,t,a)=>{"use strict";a.d(t,{F:()=>s});let s=a(5350).dp},241:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u});var s=a(2115);let r=0,l=new Map,i=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=n(d,e),o.forEach(e=>{e(d)})}function m(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=s.useState(d);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9602:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var s=a(3463),r=a(9795);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[387,970,50,460,892,394,441,517,358],()=>t(5262)),_N_E=e.O()}]);